<!DOCTYPE html>
<html lang="pt-BR">
<head >
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Criar Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<style>

  .container-card{
    max-width: 900px;
    margin: 0 auto;
    background: #d3d3d3;
    padding: 2rem;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
  }
  h1{ text-align:center; font-weight:700; margin-bottom:1.25rem; }
  input[type="text"]{
    width:100%; padding:0.6rem; border-radius:10px; border:1px solid gray; font-size:1rem;
    box-sizing:border-box;
  }

  /* controles superiores */
  .controls { display:flex; gap:12px; margin-bottom:1rem; }
  .control-btn {
    flex:1;
    border: none;
    padding: 0.75rem;
    border-radius: 12px;
    color: white;
    font-weight:600;
    cursor:pointer;
    display:flex;
    justify-content:center;
    align-items:center;
  }
  .btn-add { background: linear-gradient(135deg,#6a11cb,#2575fc); }
  .btn-remove { background: linear-gradient(135deg,#f05454,#ef4444); }
  .btn-back {
    background: linear-gradient(135deg,#999,#555);
    text-decoration:none;
    color: white;
    display:flex;
    justify-content:center;
    align-items:center;
  }

  .pergunta-box{
    background:#f7f9fc;
    padding:1rem;
    border-radius:14px;
    margin-bottom:1rem;
  }
  .pergunta-box h4{ margin-bottom:0.75rem; font-size:1.05rem; }
  .opcao-row{
    display:flex;
    gap:10px;
    align-items:center;
    margin-bottom:0.5rem;
  }
  .option-input{
    flex:1;
    padding:0.55rem;
    border-radius:10px;
    border:1px solid #e0e6f0;
  }

  
  .radio-box{
    width:44px; height:44px;
    border-radius:10px;
    display:flex; align-items:center; justify-content:center;
    background:#e6e9f2;
    cursor:pointer;
    border:2px solid transparent;
    transition: all .12s ease;
  }
  .radio-box input[type="radio"]{ display:none; }
  .radio-box .inner{
    width:18px; height:18px; border-radius:4px; border:2px solid #cfd6e6; background:transparent;
    transition: all .12s ease;
  }
  .radio-box input[type="radio"]:checked + .inner{
    background: linear-gradient(135deg,#6a11cb,#2575fc);
    border-color: transparent;
  }

  .submit-btn{
    margin-top:1rem;
    width:100%;
    padding:0.9rem;
    border-radius:50px;
    border:none;
    font-weight:700;
    color:white;
    background: linear-gradient(135deg,#6a11cb,#2575fc);
    cursor:pointer;
  }

  
  @media (max-width:600px){
    .controls{ flex-direction:column; }
  }
</style>
</head>

<body>
  <div class="container-card">
    <h1>Criar Quiz</h1>

    <div class="controls">
      <button type="button" class="control-btn btn-add" onclick="adicionarPergunta()">➕ Adicionar</button>
      <button type="button" class="control-btn btn-remove" onclick="removerPergunta()">➖ Remover</button>
      <a href="{{ url_for('index') }}" class="btn-back" style="flex:1; border-radius:12px;">Voltar</a>
    </div>

    <form method="POST" action="{{ url_for('criar_quiz') }}" id="quizForm">
      <input type="text" name="titulo" placeholder="Título do Quiz" required>

      <div id="perguntas-container" style="margin-top:1rem;"></div>

      <button type="submit" class="submit-btn">Salvar Quiz</button>
    </form>
  </div>

<script>
  let numPerguntas = 5; 
  function criarPerguntaBox(i){
    const div = document.createElement('div');
    div.className = 'pergunta-box';
    div.innerHTML = `
      <h4>Pergunta ${i+1}</h4>
      <input type="text" name="pergunta[]" placeholder="Digite a pergunta" required>

      <div class="opcoes" style="margin-top:0.75rem;">
        <div class="opcao-row">
          <input class="option-input" type="text" name="opcao1[]" placeholder="Opção 1" required>
          <label class="radio-box">
            <input type="radio" name="correta[${i}]" value="0" ${i===0? 'required' : ''}>
            <span class="inner"></span>
          </label>
        </div>

        <div class="opcao-row">
          <input class="option-input" type="text" name="opcao2[]" placeholder="Opção 2" required>
          <label class="radio-box">
            <input type="radio" name="correta[${i}]" value="1" ${i===0? 'required' : ''}>
            <span class="inner"></span>
          </label>
        </div>

        <div class="opcao-row">
          <input class="option-input" type="text" name="opcao3[]" placeholder="Opção 3" required>
          <label class="radio-box">
            <input type="radio" name="correta[${i}]" value="2" ${i===0? 'required' : ''}>
            <span class="inner"></span>
          </label>
        </div>

        <div class="opcao-row">
          <input class="option-input" type="text" name="opcao4[]" placeholder="Opção 4" required>
          <label class="radio-box">
            <input type="radio" name="correta[${i}]" value="3" ${i===0? 'required' : ''}>
            <span class="inner"></span>
          </label>
        </div>
      </div>
    `;
    return div;
  }

  function renderPerguntas(){
    const container = document.getElementById('perguntas-container');
    container.innerHTML = '';
    for(let i=0;i<numPerguntas;i++){
      container.appendChild(criarPerguntaBox(i));
    }
  }

  function adicionarPergunta(){
    numPerguntas++;
    renderPerguntas();
  }
  function removerPergunta(){
    if(numPerguntas>1){ numPerguntas--; renderPerguntas(); }
  }

  // render inicial
  renderPerguntas();
</script>
</body>
</html>
